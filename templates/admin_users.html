{% extends 'base.html' %}
{% block content %}
<h3>Admin Users</h3>

<table class="table table-striped">
<thead>
<tr>
<th>ID</th>
<th>Username</th>
<th>Email</th>
<th>Role</th>
<th>Actions</th>
</tr>
</thead>
<tbody>
{% for user in users %}
<tr>
<td>{{ user.id }}</td>
<td>{{ user.username }}</td>
<td>{{ user.email }}</td>
<td>{{ 'Admin' if user.is_admin else 'User' }}</td>
<td>
    {% if not user.is_admin %}
    <form action="{{ url_for('promote_user', user_id=user.id) }}" method="POST" style="display:inline;">
        <button type="submit" class="btn btn-sm btn-success">Promote</button>
    </form>
    {% else %}
    <form action="{{ url_for('demote_user', user_id=user.id) }}" method="POST" style="display:inline;">
        <button type="submit" class="btn btn-sm btn-warning">Demote</button>
    </form>
    {% endif %}

    {% if user.id != current_user.id %}
    <form action="{{ url_for('delete_user', user_id=user.id) }}" method="POST" style="display:inline;">
        <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Are you sure you want to delete this user?');">Delete</button>
    </form>
    {% endif %}
</td>
</tr>
{% endfor %}
</tbody>
</table>
{% endblock %}
